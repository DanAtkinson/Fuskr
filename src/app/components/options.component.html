<div class="container-fluid options-container">
	<div class="row">
		<div class="col-12">
			<h1 class="mb-4"><i class="fas fa-cog me-2"></i>{{ translate('Options_Title') }}</h1>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-header">
					<h5 class="mb-0">
						<i class="fas fa-palette me-2"></i>{{ translate('Options_Appearance') }}
					</h5>
				</div>
				<div class="card-body">
					<div class="form-check">
						<input
							class="form-check-input"
							type="checkbox"
							id="darkMode"
							[(ngModel)]="options.display.darkMode"
							(change)="onDarkModeChange(); saveOptions()"
						/>
						<label class="form-check-label" for="darkMode">
							<i class="fas fa-moon me-1"></i>{{ translate('Options_DarkMode') }}
						</label>
						<div class="form-text">{{ translate('Options_DarkMode_Description') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-header">
					<h5 class="mb-0">
						<i class="fas fa-image me-2"></i>{{ translate('Options_ImageDisplay') }}
					</h5>
				</div>
				<div class="card-body">
					<div class="mb-3">
						<label class="form-label fw-bold">{{ translate('Options_DefaultImageDisplayMode') }}</label>
						<div class="form-text mb-2">{{ translate('Options_DisplayModeDescription') }}</div>

						<div class="form-check">
							<input
								class="form-check-input"
								type="radio"
								name="imageDisplayMode"
								value="fitOnPage"
								id="fitOnPage"
								[(ngModel)]="options.display.imageDisplayMode"
								(change)="saveOptions()"
							/>
							<label class="form-check-label" for="fitOnPage">
								<i class="fas fa-compress-alt me-1"></i>{{ translate('Options_ResizeImagesFitOnPage') }}
							</label>
						</div>
						<div class="form-check">
							<input
								class="form-check-input"
								type="radio"
								name="imageDisplayMode"
								value="fullWidth"
								id="fullWidth"
								[(ngModel)]="options.display.imageDisplayMode"
								(change)="saveOptions()"
							/>
							<label class="form-check-label" for="fullWidth">
								<i class="fas fa-arrows-alt-h me-1"></i>{{ translate('Options_ResizeImagesFullWidth') }}
							</label>
						</div>
						<div class="form-check">
							<input
								class="form-check-input"
								type="radio"
								name="imageDisplayMode"
								value="fillPage"
								id="fillPage"
								[(ngModel)]="options.display.imageDisplayMode"
								(change)="saveOptions()"
							/>
							<label class="form-check-label" for="fillPage">
								<i class="fas fa-expand-alt me-1"></i>{{ translate('Options_ResizeImagesFillPage') }}
							</label>
						</div>
						<div class="form-check">
							<input
								class="form-check-input"
								type="radio"
								name="imageDisplayMode"
								value="thumbnails"
								id="thumbnails"
								[(ngModel)]="options.display.imageDisplayMode"
								(change)="saveOptions()"
							/>
							<label class="form-check-label" for="thumbnails">
								<i class="fas fa-th me-1"></i>{{ translate('Options_ResizeImagesThumbnails') }}
							</label>
						</div>
					</div>

					<div class="form-check mb-3">
						<input
							class="form-check-input"
							type="checkbox"
							id="showImagesInViewer"
							[(ngModel)]="options.display.showImagesInViewer"
							(change)="saveOptions()"
						/>
						<label class="form-check-label" for="showImagesInViewer">
							<i class="fas fa-search-plus me-1"></i>{{ translate('Options_ShowImagesInViewerDefault') }}
						</label>
						<div class="form-text">{{ translate('Options_ShowImagesInViewerDescription') }}</div>
					</div>

					<div class="form-check">
						<input
							class="form-check-input"
							type="checkbox"
							id="toggleBrokenImages"
							[(ngModel)]="options.display.toggleBrokenImages"
							(change)="saveOptions()"
						/>
						<label class="form-check-label" for="toggleBrokenImages">
							<i class="fas fa-exclamation-triangle me-1"></i>{{ translate('Options_ShowBrokenImagesDefault') }}
						</label>
						<div class="form-text">{{ translate('Options_ShowBrokenImagesDescription') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-header">
					<h5 class="mb-0">
						<i class="fas fa-cogs me-2"></i>{{ translate('Options_Behaviour') }}
					</h5>
				</div>
				<div class="card-body">
					<div class="form-check mb-3">
						<input
							class="form-check-input"
							type="checkbox"
							id="openInForeground"
							[(ngModel)]="options.behaviour.openInForeground"
							(change)="saveOptions()"
						/>
						<label class="form-check-label" for="openInForeground">
							<i class="fas fa-window-restore me-1"></i>{{ translate('Options_OpenNewFusksInForeground') }}
						</label>
						<div class="form-text">{{ translate('Options_OpenNewFusksInForeground_Description') }}</div>
					</div>

					<div class="form-check">
						<input
							class="form-check-input"
							type="checkbox"
							id="keepRecentFusks"
							[(ngModel)]="options.behaviour.keepRecentFusks"
							(change)="saveOptions()"
						/>
						<label class="form-check-label" for="keepRecentFusks">
							<i class="fas fa-history me-1"></i>{{ translate('Options_History_Keep') }}
						</label>
						<div class="form-text">{{ translate('Options_History_Keep_Description') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-header">
					<h5 class="mb-0">
						<i class="fas fa-shield-alt me-2"></i>{{ translate('Options_OverloadProtection') }}
					</h5>
				</div>
				<div class="card-body">
					<div class="form-check mb-3">
						<input
							class="form-check-input"
							type="checkbox"
							id="enableOverloadProtection"
							[(ngModel)]="options.safety.enableOverloadProtection"
							(change)="saveOptions()"
						/>
						<label class="form-check-label" for="enableOverloadProtection">
							<i class="fas fa-exclamation-triangle me-1"></i>{{ translate('Options_EnableOverloadProtection') }}
						</label>
						<div class="form-text">{{ translate('Options_EnableOverloadProtection_Description') }}</div>
					</div>

					@if (options.safety.enableOverloadProtection) {
						<div class="mb-3">
							<label class="form-label" for="overloadProtectionLimit">{{ translate('Options_OverloadProtectionLimit') }}</label>
							<input
								class="form-control"
								type="number"
								id="overloadProtectionLimit"
								min="50"
								max="10000"
								step="50"
									[(ngModel)]="options.safety.overloadProtectionLimit"
								(change)="saveOptions()"
							/>
							<div class="form-text">{{ translate('Options_OverloadProtectionLimit_Description') }}</div>
						</div>
					}
				</div>
			</div>
		</div>
	</div>

	<!-- Debug Panel -->
	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-header">
					<h5 class="mb-0">
						<button
							class="btn btn-link text-decoration-none p-0 text-start w-100"
							type="button"
							(click)="toggleDebugPanel()"
							[attr.aria-expanded]="showDebugPanel">
							<i class="fas fa-bug me-2"></i>{{ translate('Options_Debug') || 'Debug & Diagnostics' }}
							<i [class]="showDebugPanel ? 'fas fa-chevron-up float-end' : 'fas fa-chevron-down float-end'"></i>
						</button>
					</h5>
				</div>
				@if (showDebugPanel) {
					<div class="card-body">
						<div class="alert alert-info">
							<i class="fas fa-info-circle me-1"></i>
							Use this panel to export debug logs when reporting issues. Logs help diagnose problems and improve the extension.
						</div>

						<div class="row mb-3">
							<div class="col-md-6">
								<h6>Logger Status</h6>
								<ul class="list-unstyled">
									<li><strong>Enabled:</strong> {{ loggerConfig.enabled ? 'Yes' : 'No' }}</li>
									<li><strong>Log Level:</strong> {{ getLogLevelName(loggerConfig.logLevel) }}</li>
									<li><strong>Stored Logs:</strong> {{ loggerConfig.logCount }}/{{ loggerConfig.maxLogs }}</li>
								</ul>
							</div>
							<div class="col-md-6">
								<h6>Actions</h6>
								<div class="btn-group-vertical d-grid gap-2">
									<button class="btn btn-primary" type="button" (click)="exportLogs()">
										<i class="fas fa-download me-1"></i>Export Debug Logs
									</button>
									<button class="btn btn-outline-warning" type="button" (click)="clearLogs()">
										<i class="fas fa-trash me-1"></i>Clear Logs
									</button>
								</div>
							</div>
						</div>

						<div class="alert alert-warning">
							<i class="fas fa-exclamation-triangle me-1"></i>
							<strong>Privacy Note:</strong> Debug logs may contain URLs and settings data.
							Review exported logs before sharing them for support.
						</div>
					</div>
				}
			</div>
		</div>
	</div>

	@if (statusMessage) {
		<div class="alert alert-success alert-dismissible fade show" role="alert">
			<i class="fas fa-check-circle me-1"></i>{{ statusMessage }}
		</div>
	}
</div>
